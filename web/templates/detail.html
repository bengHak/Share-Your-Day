{% extends "base.html" %} {% load static %}{% block contents %}

<br />
<br />
{% comment %} rgba(248, 131, 121, 0.15) {% endcomment %}
<div class="jumbotron" style="background: rgba(0,0,0,0)">
  {% comment %} style="background: linear-gradient(#ffffff, rgba(248, 131, 121,
  0.15), #ffffff) !important;"> {% endcomment %}
  <div class="container">
    <div class="row">
      <div class="container col-md-8">
        <img
          src="{{ fund_detail.image_url.url }}"
          alt="{{ title }}"
          width="100%"
          style="border-radius: 20px !important;"
        />
        <br />
      </div>
      <div class="container col-md-4 align-self-center">
        <div class="media-body">
          <h2 class="mt-0">{{ fund_detail.title }}</h2>
          <h5 href="#">기부자명(기관명, 링크로 연결)</h5>
          <div style="font-weight:bold;">
            <p>기부 시작일 ~ 기부 마감일</p>
            <br />
            <p>{{ fund_detail.start_day }} ~ {{ fund_detail.end_day }}</p>
            <p>목표 금액 : {{ fund_detail.goal }}원</p>
            <p>현재 모금액 : {{ fund_detail.current_fund }}원</p>
            <p>test view : {{ fund_detail.hit }}</p>
          </div>
          <div class="row justify-content-start">
            <div class="col-md-12">
              <form
                action="{% url 'post_like' fund_detail.fund_id%}"
                method="POST"
                style="display:inline;"
              >
                {% csrf_token %}
                <button
                  type="submit"
                  value="like"
                  class="btn btn-primary btn-sm"
                >
                  {{ fund_detail.like }} 좋아요
                </button>
              </form>
              <button
                type="button"
                id="kakao-link-btn"
                class="btn btn-primary btn-sm"
                href="javascript:;"
              >
                카톡 공유
              </button>
              <button type="button" class="btn btn-primary btn-sm">
                URL 복사
              </button>
            </div>
          </div>

          <div class="row justify-content-start mt-2">
            <div class="col-md-12">
              <button
                type="button"
                class="btn btn-warning"
                style="width:100% !important;"
                onclick="location.href='{% url 'payment' %}'"
              >
                기부하기
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12 mt-3 mb-1">
        <div class="progress" style="height: 30px; width: 100%">
          <div
            class="progress-bar bg-warning"
            role="progressbar"
            style="width: {% widthratio fund_detail.current_fund fund_detail.goal 100 %}%; color: black;"
            aria-valuenow="{% widthratio fund_detail.current_fund fund_detail.goal 100 %}"
            aria-valuemin="0"
            aria-valuemax="100"
          >
            {% widthratio fund_detail.current_fund fund_detail.goal 100 %}% ({{
              fund_detail.current_fund
            }}원)
          </div>
        </div>
      </div>
      <div class="col-md-6 mt-4">
        <div class="jumbotron">
          {{ fund_detail.content }}
        </div>
      </div>

      <div class="col-md-6 mt-4">
        <div class="jumbotron">
          <h4>기부자 목록</h4>
          {% for giver in fund_detail.givers %}
          <div class="row">
            <div class="col-md-3 col-sm-12">
              {{ giver.nickname }}
            </div>
            <div
              class="progress col-md-9 col-sm-12"
              style="height: 20px; width: 100%"
            >
              <div
                class="progress-bar bg-warning"
                role="progressbar"
                style="width: {% widthratio fund_detail.current_fund fund_detail.current_fund 100 %}%; color: black;"
                aria-valuenow="{% widthratio fund_detail.current_fund fund_detail.current_fund 100 %}"
                aria-valuemin="0"
                aria-valuemax="100"
              ></div>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>

  <br /><br />

  <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
  <script type="text/javascript">
    //<![CDATA[
    // // 사용할 앱의 JavaScript 키를 설정해 주세요.
    Kakao.init("c2eac2e45e9b4539eab1b1ecbeaf492a");
    // // 카카오링크 버튼을 생성합니다. 처음 한번만 호출하면 됩니다.
    Kakao.Link.createDefaultButton({
      container: "#kakao-link-btn",
      objectType: "feed",
      content: {
        title: "딸기 치즈 케익",
        description: "#케익 #딸기 #삼평동 #카페 #분위기 #소개팅",
        imageUrl:
          "http://mud-kage.kakao.co.kr/dn/Q2iNx/btqgeRgV54P/VLdBs9cvyn8BJXB3o7N8UK/kakaolink40_original.png",
        link: {
          mobileWebUrl: "https://developers.kakao.com",
          webUrl: "https://developers.kakao.com"
        }
      },
      social: {
        likeCount: 286,
        commentCount: 45,
        sharedCount: 845
      },
      buttons: [
        {
          title: "웹으로 보기",
          link: {
            mobileWebUrl: "https://developers.kakao.com",
            webUrl: "https://developers.kakao.com"
          }
        },
        {
          title: "앱으로 보기",
          link: {
            mobileWebUrl: "https://developers.kakao.com",
            webUrl: "https://developers.kakao.com"
          }
        }
      ]
    });
    //]]>
  </script>

  {% endblock contents %}
</div>
